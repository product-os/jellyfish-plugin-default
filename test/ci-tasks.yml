tickTimeout: 5
retryTimeout: 120
attemptsDefault: 3
environment:
  - name: 'AVA_OPTS'
    value: '--fail-fast'
tasks:
  - name: 'front-mirror'
    description: 'Front Mirror Tests'
    command: 'make test'
    cwd: '/usr/src/jellyfish'
    required: true
    environment:
      - name: 'FILES'
        value: './test/integration/sync/front-mirror.spec.js'
  - name: 'pipeline'
    description: 'Pipeline Tests'
    command: 'make test'
    cwd: '/usr/src/jellyfish'
    required: true
    environment:
      - name: 'FILES'
        value: './test/integration/sync/pipeline.spec.js'
    dependencies:
      - 'front-mirror'
  - name: 'balena-api-translate'
    description: 'Balena API Translate Tests'
    command: 'make test'
    cwd: '/usr/src/jellyfish'
    required: true
    environment:
      - name: 'FILES'
        value: './test/integration/sync/balena-api-translate.spec.js'
    dependencies:
      - 'pipeline'
  - name: 'flowdock-translate'
    description: 'Flowdock Translate Tests'
    command: 'make test'
    cwd: '/usr/src/jellyfish'
    required: true
    environment:
      - name: 'FILES'
        value: './test/integration/sync/flowdock-translate.spec.js'
    dependencies:
      - 'balena-api-translate'
  - name: 'outreach-translate'
    description: 'Outreach Translate Tests'
    command: 'make test'
    cwd: '/usr/src/jellyfish'
    required: true
    environment:
      - name: 'FILES'
        value: './test/integration/sync/outreach-translate.spec.js'
    dependencies:
      - 'flowdock-translate'
  - name: 'front-translate'
    description: 'Front Translate Tests'
    command: 'make test'
    cwd: '/usr/src/jellyfish'
    required: true
    environment:
      - name: 'FILES'
        value: './test/integration/sync/front-translate.spec.js'
      - name: 'INTEGRATION_FRONT_TOKEN'
        value: 'foobar'
    dependencies:
      - 'outreach-translate'
  - name: 'discourse-translate'
    description: 'Discourse Translate Tests'
    command: 'make test'
    cwd: '/usr/src/jellyfish'
    required: true
    environment:
      - name: 'FILES'
        value: './test/integration/sync/discourse*.spec.js'
    dependencies:
      - 'outreach-translate'
